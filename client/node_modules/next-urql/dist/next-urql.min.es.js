import e,{useState as n}from"react";import t from"react-ssr-prepass";import{createClient as r,ssrExchange as i,dedupExchange as o,cacheExchange as u,fetchExchange as a,Provider as l}from"urql";function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var c,f=null;function p(){f=null}function v(){return null}function m(e,n){var t="undefined"==typeof window;return!t&&f||((f=r(s({},e,{suspense:n&&(t||e.suspense)}))).toJSON=v),f}function d(){}function h(r,f){return f||(f={}),function(v){var h,q=Boolean((v.getInitialProps||f.ssr)&&!f.neverSuspend),g=function(t){var f=t.urqlClient,d=t.urqlState,h=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(t,["urqlClient","urqlState"]),g=n(0),P=e.useMemo((function(){if(f)return f;c&&"undefined"!=typeof window||(c=i({initialState:d}));var e=r(c);return e.exchanges||(e.exchanges=[o,u,c,a]),m(e,q)}),[f,d,g[0]]);return e.createElement(l,{value:P},e.createElement(v,s({urqlClient:P,resetUrqlClient:function(){p(),c=i({initialState:void 0}),g[1](g[0]+1)}},h)))};return g.displayName="withUrqlClient("+((h=v).displayName||h.name||"Component")+")",(v.getInitialProps||f.ssr)&&(g.getInitialProps=function(n){function l(){return s({},S,{urqlState:P?P.extractData():void 0,urqlClient:C})}function c(){if("undefined"!=typeof window)return s({},S,{urqlClient:C});var n=s({},S,{urqlClient:C}),r=q?n:{pageProps:n};const i=function(){if(!f.neverSuspend)return Promise.resolve(t(e.createElement(h,s({},r)))).then(d)}();return i&&i.then?i.then(l):l()}function p(e){S=e}try{var h=n.AppTree,q=!!n.Component,g=q?n.ctx:n,P=i({initialState:void 0}),y=r(P,g);y.exchanges||(y.exchanges=[o,u,P,a]);var C=m(y,!f.neverSuspend);C&&(g.urqlClient=C);var S={};const e=function(){if(v.getInitialProps)return Promise.resolve(v.getInitialProps(n)).then(p)}();return Promise.resolve(e&&e.then?e.then(c):c())}catch(e){return Promise.reject(e)}}),g}}export{m as initUrqlClient,h as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
